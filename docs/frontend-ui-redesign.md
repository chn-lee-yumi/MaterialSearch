# 前端界面重设计需求

> 面向 SuperDesign 团队的 UI 需求，覆盖素材搜索、项目库管理与批量上传的核心交互。

## 1. 背景与目标

- **现状痛点**：单页堆叠大量控件，色彩/排版缺乏层级，项目模式与永久库逻辑交织，新增的批量上传步骤与原有搜索控件混在一起，用户难以定位动作。
- **核心 objective**：
  1. 清晰拆分“搜索/浏览”和“项目素材管理”两大工作区。
  2. 最多 2~3 次点击即可完成常用动作（切换库、上传、搜索）。
  3. 永久库与项目库使用完全独立的筛选器与提示，避免“所有库”概念反复出现。
  4. 在批量上传过程中提供引导、进度与故障排查能力，保证 10~100 个文件的操作透明。

## 2. 信息架构

```
┌─────────────────────────────────────────────────────────┐
│ 顶部导航：Logo / 当前项目 / 快速操作                     │
├─────────────────────────────────────────────────────────┤
│ 左侧栏（固定宽度）                                      │
│  • 搜索模式切换（永久库 / 项目库）                      │
│  • 项目列表 + 状态标签 + “+ 新建项目”按钮              │
│  • 扫描/同步状态卡片                                    │
├─────────────────────────────────────────────────────────┤
│ 主内容（Tab）                                           │
│  [1] 搜索与结果                                         │
│  [2] 批量上传（项目库可见）                             │
│  [3] 项目统计 / 历史                                   │
└─────────────────────────────────────────────────────────┘
```

## 3. 视觉与排版指导

- **配色**：主按钮采用品牌蓝 (#3A7AFE)；项目相关操作（上传/扫描）使用辅助紫 (#6C63FF)；警示/错误遵循 Element Plus 语义色。背景保持浅灰 (#F5F7FA)。
- **字体层级**：H1 24px（页面标题），H2 18px（分区标题），正文 14px。控制不同区块的留白，卡片内行距 6~8px。
- **图标语言**：统一使用线性图标，保持填充/描边一致；库类型、文件类型、进度状态均需有图标与颜色双通道提示。

## 4. 模块化要求

### 4.1 顶部导航
- 左侧：系统 logo + 名称。
- 中间：当前库标签（Permanent / Project: <name>），显示库类型 chips。
- 右侧：快速按钮（“新建项目”、“打开上传面板”、“刷新扫描状态”）+ 用户入口。

### 4.2 左侧栏
- **项目列表**：支持折叠/筛选（全部/进行中/归档），每项展示：名称、client、缩略统计（图像数/容量）。
- **项目切换提示**：当选择项目库时，显示“当前命中范围：仅 <项目名>”，并说明如何切换。
- **扫描卡片**：显示最近一次扫描状态、进度条、剩余时间。

### 4.3 搜索面板
- 表单分区：文本搜索、图片上传、时间过滤、前后景权重 slider。永久库隐藏项目特有字段，项目库展示只读 `project_id`。
- 搜索结果区域：卡片瀑布流 + 列表模式切换；高亮命中来源（永久库 / <项目名>）。
- 空状态文案区分库类型（例：“永久库暂无结果，可尝试重新扫描” vs “当前项目尚未导入素材”）。

### 4.4 批量上传流程（面向项目库）
1. **步骤条**：输入路径 → 预览筛选 → 索引中 → 结果。
2. **路径输入卡**：支持多行文本框、`Ctrl+V` 提示、最近 10 条历史路径列表（localStorage），可按项目归类。
3. **文件预览表**：
   - 列：类型图标 / 缩略图 / 文件名+标签 / 大小 / 所在路径 / 已索引标记 +可再选。
   - 顶部工具：全选/反选/仅图片/仅视频/按文件夹分组。
   - 空间统计：显示总数、体积、已选数。
4. **索引进行中**：居中大号进度圈，右侧列表实时滚动显示当前文件，提供“取消任务”二次确认。
5. **结果面板**：成功/失败/重复三个列表折叠面板，支持导出失败列表（CSV）。

### 4.5 反馈与通知
- 全局使用统一的 Toast 样式，成功（绿色）、警告（橙）并附文字说明，如“已从 NAS 读取 45/80 个文件”。
- 批量操作完成后弹出 Summary 窗，便于用户截图归档。

## 5. 响应式与布局

- ≥1280px：左侧栏固定 280px，主内容 1000px+ 自适应。
- 1024px~1279px：左侧栏可折叠，主内容改用顶栏 tabs。
- <1024px：进入“速览模式”，隐藏批量上传，只保留搜索与结果（弹窗提示“请在桌面端执行批量上传”）。

## 6. 状态与空态

| 场景 | 文案/指引 |
|------|-----------|
| 0 项目 | “暂无项目，请先创建项目以启用项目库” + CTA |
| 项目库无素材 | “当前项目尚未索引素材，点击‘批量上传’开始导入” |
| 批量上传无路径 | 输入框内 placeholder + 示例路径（含 UNC 与本地盘符） |
| 扫描进行中 | 顶部横幅提示 + 按钮进入详情 |

## 7. 可用性与无障碍

- 操作按钮需有 tooltip + 快捷键（如 `Alt+S` 搜索，`Alt+U` 打开上传）。
- 色彩对比度 ≥ 4.5:1；关键提示带图标+文本。
- 支持中英双语，UI 需预留文本长度（项目名 20+ 字）。

## 8. 与后端对接要点

- 所有请求依旧走既有 API：`/api/match`、`/api/preview_files`、`/api/batch_index*`、`/api/scan`。
- 保持库类型约束（只有 permanent/project），当切换库时需刷新搜索面板默认值。
- 路径历史存储 localStorage，结构建议：`recentPaths[{projectId, paths:[], updatedAt}]`。
- 批量上传结果页需要能读取 `/api/batch_index/<task_id>/status` 的 `failed`、`duplicates` 等字段并支持导出。

## 9. 交付物

- 高保真页面（桌面 ≥1280px，平板 1024px，移动 768px）各 1 张。
- 组件规范（按钮、标签、表格、步骤条、提示）。
- 交互稿：批量上传四步骤流转、扫描状态提示、项目切换。

> 完成上述需求后，请输出 Figma 源文件、交互说明与切图标注，供前端落地。

